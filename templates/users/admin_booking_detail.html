{% extends 'base.html' %}

{% block content %}
<div class="container" style="padding: 4rem 0;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="color: var(--color-primary);">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø² #{{ booking.id }} ğŸ“</h1>
        <a href="{% url 'admin_bookings_list' %}" class="btn btn-glass">â†©ï¸ Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</a>
    </div>

    <div class="glass-card" style="margin-bottom: 2rem;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            <!-- Booking Info -->
            <div>
                <h3 style="color: var(--color-secondary); margin-bottom: 1rem;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¬Ø²</h3>
                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {{ booking.start_time|date:"Y-m-d H:i" }}</p>
                <p><strong>Ø§Ù„Ù…ÙƒØ§Ù†:</strong> {{ booking.venue.name }}</p>
                <p><strong>Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</strong> {{ booking.event_type }} ({{ booking.attendees_count }} Ø´Ø®Øµ)</p>
                <p><strong>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> <span
                        style="font-size: 1.2rem; font-weight: bold; color: var(--color-primary);">{{
                        booking.total_price }} Ø±ÙŠØ§Ù„</span></p>
                <p><strong>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</strong>
                    <span class="badge 
                            {% if booking.status == 'CONFIRMED' or booking.status == 'APPROVED' %}badge-success
                            {% elif booking.status == 'CANCELLED' or booking.status == 'REJECTED' %}badge-danger
                            {% else %}badge-warning{% endif %}">
                        {{ booking.get_status_display }}
                    </span>
                </p>
            </div>

            <!-- Customer Info -->
            <div>
                <h3 style="color: var(--color-secondary); margin-bottom: 1rem;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
                <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> {{ booking.customer.username }}</p>
                <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> {{ booking.customer.phone_number|default:"ØºÙŠØ± Ù…ØªÙˆÙØ±" }}</p>
                <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> {{ booking.customer.email }}</p>
                <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</strong> {{ booking.customer.date_joined|date:"Y-m-d" }}</p>
            </div>
        </div>

        <hr style="border: 0; border-top: 1px solid rgba(0,0,0,0.1); margin: 2rem 0;">

        <!-- Status Actions -->
        <h3 style="margin-bottom: 1rem;">âš™ï¸ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©</h3>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            {% if booking.status != 'CONFIRMED' %}
            <a href="{% url 'admin_update_booking_status' booking.id 'CONFIRMED' %}" class="btn btn-primary"
                style="background: var(--color-success);">âœ” ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</a>
            {% endif %}

            {% if booking.status != 'REJECTED' and booking.status != 'CANCELLED' %}
            <a href="{% url 'admin_update_booking_status' booking.id 'REJECTED' %}" class="btn btn-primary"
                style="background: var(--color-danger);">âœ– Ø±ÙØ¶ / Ø¥Ù„ØºØ§Ø¡</a>
            {% endif %}

            {% if booking.status == 'CONFIRMED' %}
            <a href="{% url 'admin_update_booking_status' booking.id 'COMPLETED' %}" class="btn btn-primary"
                style="background: var(--color-secondary);">ğŸ ØªØ³Ø¬ÙŠÙ„ ÙƒÙ€ Ù…ÙƒØªÙ…Ù„</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}